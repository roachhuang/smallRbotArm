import freenect

# Initialize the Kinect v1 device
ctx = freenect.init()

# Get the number of connected devices
num_devices = freenect.num_devices(ctx)

# Open the Kinect v1 device
device = freenect.open_device(ctx, 0)

# Start the depth stream
freenect.start_depth(device)
# Stop the depth stream and close the device
freenect.stop_depth(device)
freenect.close_device(device)
# freenect.shutdown(ctx)

# Capture a single depth frame
depth, timestamp = freenect.sync_get_depth()



# Convert the depth frame to an ndarray for further processing
depth_array = depth.astype(float)
depth_array /= 2**12 - 1  # Normalize the depth values
depth_array *= 1000  # Convert the depth values to millimeters
print(depth_array)

freenect.shutdown(ctx)